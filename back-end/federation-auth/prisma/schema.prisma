datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  userId         Int      @id @default(autoincrement())
  email          String   @unique
  password       String

  active         Boolean  @default(false)
  role           Role     @default(USER)

  language       Language @relation(fields: [languageId], references: [languageId])
  security       Security?
  languageId     Int

  firstname      String
  lastname       String
  phone          String?
  address        String?
  avatar         String?
  banner         String?

  created_at     DateTime @default(now())
  updated_at     DateTime @updatedAt
  deleted        Boolean  @default(false)
}

model Language {
  languageId     Int      @id @default(autoincrement())
  code           String   @db.VarChar(2)
  name           String
  native         String

  users          User[]

  created_at     DateTime @default(now())
  updated_at     DateTime @updatedAt
  deleted        Boolean  @default(false)
}

model Security {
  securityId     Int      @id @default(autoincrement())
  type           AuthType @default(PASSWORD)

  secret         String?
  recovery       String?
  auxiliary      String?
  metadata       String?

  user           User @relation(fields: [userId], references: [userId])
  userId         Int

  created_at     DateTime @default(now())
  updated_at     DateTime @updatedAt
  deleted        Boolean  @default(false)
}

enum Role {
  USER
  ADMIN
}

enum AuthType {
  PASSWORD
  MFA_CODES
  WEBAUTHN
}